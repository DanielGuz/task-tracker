import{d as b}from"./DataServiceApi-jMRJP3iC.js";import{a as v,_ as V,o as y,c as U,r as g,g as I,z as B,A as c,B as _,y as E,C as O,D,f as $,p as u,b as a,w as t,m as f,E as m}from"./index-COHp593Y.js";import{T as x}from"./Button-VjdmMWdi.js";import{T as k}from"./FormContainer-DDa5hllq.js";const w=v({name:"tt-ui-title"}),G={class:"ttui-title"},P={class:"ttui-title__subtitle"};function R(e,o,p,F,S,C){return y(),U("div",G,[g(e.$slots,"default"),I("div",P,[g(e.$slots,"subtitle")])])}const z=V(w,[["render",R]]),H=v({name:"tt-ui-edit",setup(){return{schema:B({apellido:c().required().max(40),nombre:c().required().max(40),id_entidad:_().required(),id_rol:_().required(),numdoc:_().required().max(99999999999),usuario:c().required().max(100),clave:c().nullable().max(1e3)})}},data(){return{isFetching:!1,id_usuario:null,usuarios:{apellido:"",nombre:"",id_entidad:null,id_rol:null,numdoc:null,usuario:"",clave:null},roles:[],entidades:[],title:"Usuarios "}},components:{TtUiTitle:z,TtUiFormContainer:k,TtUiButton:x,TtUiHeaderBar:E,VeeForm:O,VeeField:D},methods:{async save(){let e=null;const o={...this.usuarios},p=this.$buefy.loading.open();this.id_usuario?e=b.put(`${CONFIG.ENDPOINT.USUARIOS}/`,o,this.id_usuario):e=b.post(`
          ${CONFIG.ENDPOINT.USUARIOS}/${this.id_usuario?`${this.id_usuario}`:""}`,o),e.then(()=>this.$router.push({name:"parametric.usuarios"})).finally(()=>p.close())},onInvalidSubmit(){this.$buefy.notification.open({duration:4e3,message:"El formulario no superó la validación",hasIcon:!0,type:"is-danger"})}},async beforeMount(){const e=this.$buefy.loading.open();this.$route.params.id!=="new"&&(this.id_usuario=$.base64ToUtf8(this.$route.params.id),this.usuarios={id_usuario:1,nombre:"User",apellido:"1",usuario:"user",numdoc:123456,fecha_login:"01-01-2024",fecha_creacion:"01-01-2024"},this.title=$.shortString("Usuario ID: "+this.usuarios.id_usuario+"-"+this.usuarios.usuario)),e.close()},beforeUnmount(){this.usuarios={},this.id_usuario=null}}),M={style:{height:"calc(100vh - 90px)"}},j={class:"hero m-0 py-4",style:{height:"calc(100% - 90px)"}};function J(e,o,p,F,S,C){const h=u("tt-ui-button"),N=u("tt-ui-header-bar"),T=u("tt-ui-title"),n=u("b-input"),r=u("b-field"),d=u("VeeField"),q=u("tt-ui-form-container"),A=u("VeeForm");return y(),U("section",M,[a(A,{onSubmit:e.save,"validation-schema":e.schema,onInvalidSubmit:e.onInvalidSubmit},{default:t(({errors:i})=>[a(N,{title:this.title,color:"theme"},{actions:t(()=>[a(h,{class:"mr-2",onClick:o[0]||(o[0]=s=>e.$router.push({name:"parametric.users"}))},{default:t(()=>[f("Volver")]),_:1}),a(h,{submit:"",success:"",class:"ml-2"},{default:t(()=>[f("Guardar")]),_:1})]),_:1},8,["title"]),I("div",j,[a(q,{simple:""},{default:t(()=>[a(T,null,{default:t(()=>[f("Formulario")]),_:1}),a(d,{modelValue:e.usuarios.nombre,"onUpdate:modelValue":o[1]||(o[1]=s=>e.usuarios.nombre=s),name:"nombre"},{default:t(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Nombre",message:i.nombre,type:{"is-danger":i.nombre,"is-success":l}},{default:t(()=>[a(n,m(s,{maxlength:"40",placeholder:"Ingrese un nombre para el usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.apellido,"onUpdate:modelValue":o[2]||(o[2]=s=>e.usuarios.apellido=s),name:"apellido"},{default:t(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Apellido",message:i.apellido,type:{"is-danger":i.apellido,"is-success":l}},{default:t(()=>[a(n,m(s,{maxlength:"40",placeholder:"Ingrese un apellido para el usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.numdoc,"onUpdate:modelValue":o[3]||(o[3]=s=>e.usuarios.numdoc=s),name:"numdoc"},{default:t(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Número de Documento",message:i.numdoc,type:{"is-danger":i.numdoc,"is-success":l}},{default:t(()=>[a(n,m(s,{maxlength:"10",placeholder:"Ingrese el número de documento del usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.usuario,"onUpdate:modelValue":o[4]||(o[4]=s=>e.usuarios.usuario=s),name:"usuario"},{default:t(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Usuario",message:i.usuario,type:{"is-danger":i.usuario,"is-success":l}},{default:t(()=>[a(n,m(s,{maxlength:"100",placeholder:"Ingrese el usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.clave,"onUpdate:modelValue":o[5]||(o[5]=s=>e.usuarios.clave=s),name:"clave"},{default:t(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Clave",message:i.clave,type:{"is-danger":i.clave,"is-success":l}},{default:t(()=>[a(n,m(s,{maxlength:"1000",placeholder:"Ingrese la clave"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"])]),_:2},1024)])]),_:1},8,["onSubmit","validation-schema","onInvalidSubmit"])])}const X=V(H,[["render",J]]);export{X as default};
