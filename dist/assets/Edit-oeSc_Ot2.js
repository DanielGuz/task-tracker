import{d as b}from"./DataServiceApi-NXsU4w8H.js";import{d as U,h as F,i as m,j as p,T as I,F as T,k as S,l as g,_ as C,r as u,o as N,c as q,a,w as o,b as _,e as k,m as c}from"./index-C2nEU7Iq.js";import{T as x}from"./Button-Bre3B7el.js";import{T as O}from"./FormContainer-DNiD_vkM.js";import{T as B}from"./Title-CG5D0WMR.js";const E=U({name:"tt-ui-edit",setup(){return{schema:F({apellido:m().required().max(40),nombre:m().required().max(40),id_entidad:p().required(),id_rol:p().required(),numdoc:p().required().max(99999999999),usuario:m().required().max(100),clave:m().nullable().max(1e3)})}},data(){return{isFetching:!1,id_usuario:null,usuarios:{apellido:"",nombre:"",id_entidad:null,id_rol:null,numdoc:null,usuario:"",clave:null},roles:[],entidades:[],title:"Tareas "}},components:{TtUiTitle:B,TtUiFormContainer:O,TtUiButton:x,TtUiHeaderBar:I,VeeForm:T,VeeField:S},methods:{async save(){let e=null;const i={...this.usuarios},h=this.$buefy.loading.open();this.id_usuario?e=b.put(`${CONFIG.ENDPOINT.USUARIOS}/`,i,this.id_usuario):e=b.post(`
          ${CONFIG.ENDPOINT.USUARIOS}/${this.id_usuario?`${this.id_usuario}`:""}`,i),e.then(()=>this.$router.push({name:"parametric.usuarios"})).finally(()=>h.close())},onInvalidSubmit(){this.$buefy.notification.open({duration:4e3,message:"El formulario no super贸 la validaci贸n",hasIcon:!0,type:"is-danger"})}},async beforeMount(){const e=this.$buefy.loading.open();this.$route.params.id!=="new"&&(this.id_usuario=g.base64ToUtf8(this.$route.params.id),this.usuarios={id_usuario:1,nombre:"User",apellido:"1",usuario:"user",numdoc:123456,fecha_login:"01-01-2024",fecha_creacion:"01-01-2024"},this.title=g.shortString("Usuario ID: "+this.usuarios.id_usuario+"-"+this.usuarios.usuario)),e.close()},beforeUnmount(){this.usuarios={},this.id_usuario=null}}),D={style:{height:"calc(100vh - 90px)"}},P={class:"hero m-0 py-4",style:{height:"calc(100% - 90px)"}};function w(e,i,h,A,G,R){const f=u("tt-ui-button"),V=u("tt-ui-header-bar"),y=u("tt-ui-title"),n=u("b-input"),r=u("b-field"),d=u("VeeField"),$=u("tt-ui-form-container"),v=u("VeeForm");return N(),q("section",D,[a(v,{onSubmit:e.save,"validation-schema":e.schema,onInvalidSubmit:e.onInvalidSubmit},{default:o(({errors:t})=>[a(V,{title:this.title,color:"theme"},{actions:o(()=>[a(f,{class:"mr-2",onClick:i[0]||(i[0]=s=>e.$router.push({name:"track.tasks"}))},{default:o(()=>[_("Volver")]),_:1}),a(f,{submit:"",success:"",class:"ml-2"},{default:o(()=>[_("Guardar")]),_:1})]),_:1},8,["title"]),k("div",P,[a($,{simple:""},{default:o(()=>[a(y,null,{default:o(()=>[_("Formulario")]),_:1}),a(d,{modelValue:e.usuarios.nombre,"onUpdate:modelValue":i[1]||(i[1]=s=>e.usuarios.nombre=s),name:"nombre"},{default:o(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Titulo",message:t.nombre,type:{"is-danger":t.nombre,"is-success":l}},{default:o(()=>[a(n,c(s,{maxlength:"40",placeholder:"Ingrese un nombre para el usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.numdoc,"onUpdate:modelValue":i[2]||(i[2]=s=>e.usuarios.numdoc=s),name:"numdoc"},{default:o(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Descripci贸n",message:t.numdoc,type:{"is-danger":t.numdoc,"is-success":l}},{default:o(()=>[a(n,c(s,{maxlength:"10",placeholder:"Ingrese una descripci贸n"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.apellido,"onUpdate:modelValue":i[3]||(i[3]=s=>e.usuarios.apellido=s),name:"apellido"},{default:o(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Prioridad",message:t.apellido,type:{"is-danger":t.apellido,"is-success":l}},{default:o(()=>[a(n,c(s,{maxlength:"40",placeholder:"Ingrese la prioridad"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.usuario,"onUpdate:modelValue":i[4]||(i[4]=s=>e.usuarios.usuario=s),name:"usuario"},{default:o(({field:s,validate:l})=>[a(r,{class:"mb-3",label:"Asignado a",message:t.usuario,type:{"is-danger":t.usuario,"is-success":l}},{default:o(()=>[a(n,c(s,{maxlength:"100",placeholder:"Ingrese el responsable"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"])]),_:2},1024)])]),_:1},8,["onSubmit","validation-schema","onInvalidSubmit"])])}const K=C(E,[["render",w]]);export{K as default};
