import{d as b}from"./DataServiceApi-NXsU4w8H.js";import{d as $,h as I,i as p,j as c,T as F,F as T,k as S,l as g,_ as N,r as t,o as C,c as q,a,w as o,b as _,e as O,m}from"./index-C2nEU7Iq.js";import{T as x}from"./Button-Bre3B7el.js";import{T as A}from"./FormContainer-DNiD_vkM.js";import{T as B}from"./Title-CG5D0WMR.js";const E=$({name:"tt-ui-edit",setup(){return{schema:I({apellido:p().required().max(40),nombre:p().required().max(40),id_entidad:c().required(),id_rol:c().required(),numdoc:c().required().max(99999999999),usuario:p().required().max(100),clave:p().nullable().max(1e3)})}},data(){return{isFetching:!1,id_usuario:null,usuarios:{apellido:"",nombre:"",id_entidad:null,id_rol:null,numdoc:null,usuario:"",clave:null},roles:[],entidades:[],title:"Usuarios "}},components:{TtUiTitle:B,TtUiFormContainer:A,TtUiButton:x,TtUiHeaderBar:F,VeeForm:T,VeeField:S},methods:{async save(){let e=null;const i={...this.usuarios},f=this.$buefy.loading.open();this.id_usuario?e=b.put(`${CONFIG.ENDPOINT.USUARIOS}/`,i,this.id_usuario):e=b.post(`
          ${CONFIG.ENDPOINT.USUARIOS}/${this.id_usuario?`${this.id_usuario}`:""}`,i),e.then(()=>this.$router.push({name:"parametric.usuarios"})).finally(()=>f.close())},onInvalidSubmit(){this.$buefy.notification.open({duration:4e3,message:"El formulario no superó la validación",hasIcon:!0,type:"is-danger"})}},async beforeMount(){const e=this.$buefy.loading.open();this.$route.params.id!=="new"&&(this.id_usuario=g.base64ToUtf8(this.$route.params.id),this.usuarios={id_usuario:1,nombre:"User",apellido:"1",usuario:"user",numdoc:123456,fecha_login:"01-01-2024",fecha_creacion:"01-01-2024"},this.title=g.shortString("Usuario ID: "+this.usuarios.id_usuario+"-"+this.usuarios.usuario)),e.close()},beforeUnmount(){this.usuarios={},this.id_usuario=null}}),k={style:{height:"calc(100vh - 90px)"}},D={class:"hero m-0 py-4",style:{height:"calc(100% - 90px)"}};function w(e,i,f,G,P,R){const h=t("tt-ui-button"),V=t("tt-ui-header-bar"),v=t("tt-ui-title"),n=t("b-input"),r=t("b-field"),d=t("VeeField"),y=t("tt-ui-form-container"),U=t("VeeForm");return C(),q("section",k,[a(U,{onSubmit:e.save,"validation-schema":e.schema,onInvalidSubmit:e.onInvalidSubmit},{default:o(({errors:l})=>[a(V,{title:this.title,color:"theme"},{actions:o(()=>[a(h,{class:"mr-2",onClick:i[0]||(i[0]=s=>e.$router.push({name:"parametric.users"}))},{default:o(()=>[_("Volver")]),_:1}),a(h,{submit:"",success:"",class:"ml-2"},{default:o(()=>[_("Guardar")]),_:1})]),_:1},8,["title"]),O("div",D,[a(y,{simple:""},{default:o(()=>[a(v,null,{default:o(()=>[_("Formulario")]),_:1}),a(d,{modelValue:e.usuarios.nombre,"onUpdate:modelValue":i[1]||(i[1]=s=>e.usuarios.nombre=s),name:"nombre"},{default:o(({field:s,validate:u})=>[a(r,{class:"mb-3",label:"Nombre",message:l.nombre,type:{"is-danger":l.nombre,"is-success":u}},{default:o(()=>[a(n,m(s,{maxlength:"40",placeholder:"Ingrese un nombre para el usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.apellido,"onUpdate:modelValue":i[2]||(i[2]=s=>e.usuarios.apellido=s),name:"apellido"},{default:o(({field:s,validate:u})=>[a(r,{class:"mb-3",label:"Apellido",message:l.apellido,type:{"is-danger":l.apellido,"is-success":u}},{default:o(()=>[a(n,m(s,{maxlength:"40",placeholder:"Ingrese un apellido para el usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.numdoc,"onUpdate:modelValue":i[3]||(i[3]=s=>e.usuarios.numdoc=s),name:"numdoc"},{default:o(({field:s,validate:u})=>[a(r,{class:"mb-3",label:"Número de Documento",message:l.numdoc,type:{"is-danger":l.numdoc,"is-success":u}},{default:o(()=>[a(n,m(s,{maxlength:"10",placeholder:"Ingrese el número de documento del usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.usuario,"onUpdate:modelValue":i[4]||(i[4]=s=>e.usuarios.usuario=s),name:"usuario"},{default:o(({field:s,validate:u})=>[a(r,{class:"mb-3",label:"Usuario",message:l.usuario,type:{"is-danger":l.usuario,"is-success":u}},{default:o(()=>[a(n,m(s,{maxlength:"100",placeholder:"Ingrese el usuario"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"]),a(d,{modelValue:e.usuarios.clave,"onUpdate:modelValue":i[5]||(i[5]=s=>e.usuarios.clave=s),name:"clave"},{default:o(({field:s,validate:u})=>[a(r,{class:"mb-3",label:"Clave",message:l.clave,type:{"is-danger":l.clave,"is-success":u}},{default:o(()=>[a(n,m(s,{maxlength:"1000",placeholder:"Ingrese la clave"}),null,16)]),_:2},1032,["message","type"])]),_:2},1032,["modelValue"])]),_:2},1024)])]),_:1},8,["onSubmit","validation-schema","onInvalidSubmit"])])}const K=N(E,[["render",w]]);export{K as default};
